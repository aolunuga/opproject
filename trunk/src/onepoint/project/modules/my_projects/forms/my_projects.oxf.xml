<form id="MyProjectsForm" layout="border" resource-map-ref="my_projects.my_projects"
      provider-class="onepoint.project.modules.my_projects.forms.OpMyProjectsFormProvider"
      script="/modules/my_projects/scripts/my_projects.jes">

   <data-set id="ProjectsSet"/>

   <pop-up-menu id="ProjectTablePopupMenu">
      <pop-up-item text="${SaveCSV}" on-item-selected="saveProjectTableCSV"/>
      <pop-up-item text="${SaveImage}" on-item-selected="saveProjectTableImage"/>
   </pop-up-menu>

   <data-set id="ProjectSet">
      <data-row string-value="contrib['${Contrib}']"/>
      <data-row string-value="manager['${Manager}']"/>
      <data-row string-value="observer['${Observer}']"/>
   </data-set>

  <panel layout="border" style-ref="compact-panel-default">

	<panel layout="border" style-ref="tool-panel-default" y="-1">
      <tool-bar x="-1">
         <tool-button id="PrintButton" text="${Print}" icon="/icons/print.png" disabled-icon="/icons/print_disabled.png" on-button-pressed="print" tooltip="${PrintTooltip}"/>
      </tool-bar>

     <panel x="1" layout="border" style-ref="compact-panel-default">
        <panel layout="table" flexible="false">
           <label x="0" width="2" text="${Role}"/>
           <choice-field x="2" width="3" id="ProjectChooser" data-set-ref="ProjectSet" on-value-changed="filterChanged" stateful="true" selected-index="0"/>
        </panel>
     </panel>
   </panel>


   <!-- filter (drop-down) on activities: Activities, milestones, open/closed? -->
     <tab-box id="MyTabBox" stateful="true" flexible="true">

        <tab layout="border" text="${ProjectList}" id="ProjectListTab">
           <table-box id="ProjectsTable" data-set-ref="ProjectsSet" flexible="true" pop-up-menu-ref="ProjectTablePopupMenu">
              <table-column text="${Project}" width="250" sortable="true"  data-column-index="0"/>
              <table-column text="${Status}" width="65" data-column-index="1"/>
              <table-column width="60" text="${Start}" value-type="Date" data-column-index="14" sortable="true"/>
              <table-column width="60" text="${End}" value-type="Date" data-column-index="15" sortable="true"/>
              <table-column text="${Complete}" width="80" sortable="true" data-column-index="2"  value-type="PercentageBar"/>
              <table-column text="${Resources}" width="80" sortable="true" data-column-index="16"  value-type="PercentageBar"/>
              <table-column text="${Costs}" width="80" sortable="true" data-column-index="17"  value-type="PercentageBar"/>

           </table-box>
        </tab>

        <tab layout="border" text="${ProjectResources}" id="ProjectResourcesTab">
           <table-box if="ProjectResourcesTable" data-set-ref="ProjectsSet" tree-column-index="1" flexible="true" pop-up-menu-ref="ProjectTablePopupMenu">
              <table-column text="${Project}" width="120" sortable="true"  data-column-index="0"/>
              <table-column text="${BaseEffort}" width="80" sortable="true" data-column-index="3" value-type="Duration" display-unit="Hours"/>
              <table-column text="${ActualEffort}" width="80" sortable="true" data-column-index="4" value-type="Duration" display-unit="Hours"/>
              <table-column text="${RemainingEffort}" width="70" data-column-index="18" value-type="Double" sortable="true" decimals="2"/>
              <table-column text="${ProjectedEffort}" width="70" data-column-index="10" value-type="Double" sortable="true" decimals="2"/>
              <table-column text="${DeviationEffort}" width="70" data-column-index="11" value-type="Deviation" sortable="true" decimals="2"/>
              <table-column text="${PercentageDeviationEffort}" width="70" data-column-index="12" value-type="Deviation" decimals="2" sortable="true"/>
           </table-box>
        </tab>

        <tab layout="border" text="${ProjectCosts}" id="ProjectCostsTab">
           <table-box if="ProjectResourcesTable" data-set-ref="ProjectsSet" tree-column-index="1" flexible="true" pop-up-menu-ref="ProjectTablePopupMenu">
              <table-column text="${Project}" width="120" sortable="true"  data-column-index="0"/>
              <table-column text="${BaseCosts}" width="80" sortable="true" data-column-index="5" value-type="Double" decimals="2"/>
              <table-column text="${ActualCosts}" width="80" sortable="true" data-column-index="6" value-type="Double" decimals="2"/>
              <table-column text="${RemainingCosts}" width="70" data-column-index="19" value-type="Double" sortable="true" decimals="2"/>
              <table-column text="${ProjectedCosts}" width="70" data-column-index="7" value-type="Double" sortable="true" decimals="2"/>
              <table-column text="${DeviationCosts}" width="70" data-column-index="8" value-type="Deviation" sortable="true" decimals="2"/>
              <table-column text="${PercentageDeviationCosts}" width="70" data-column-index="9" value-type="Deviation" decimals="2" sortable="true"/>
           </table-box>
        </tab>

     </tab-box>

	<status-bar y="1"/>

	</panel>

</form>
