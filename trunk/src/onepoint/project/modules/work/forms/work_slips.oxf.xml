<form id="WorkSlipsForm" layout="border" resource-map-ref="work.work_slips"
      provider-class="onepoint.project.modules.work.forms.OpWorkSlipsFormProvider"
      script="/modules/work/scripts/work_slips.jes">
   <!-- maybe add 2nd tab showing calendar of work-slip "coverage" -->
   <data-set id="WorkSlipSet"/>

   <panel layout="border" style-ref="compact-panel-default">

      <data-set id="PeriodSet">
         <data-row string-value="current['{$CurrentMonth}']"/>
         <data-row string-value="previous['{$PreviousMonth}']"/>
         <data-row string-value="year['{$CurrentYear}']"/>
         <data-row string-value="all['{$All}']"/>
      </data-set>

      <panel layout="border" style-ref="tool-panel-default" y="-1">
         <tool-bar>
            <tool-button text="{$NewWorkSlip}" id="NewWorkSlip" icon="/modules/work/icons/new_work_slip.png"
                         disabled-icon="/modules/work/icons/new_work_slip_disabled.png" on-button-pressed="newWorkSlip"
                         tooltip="{$NewWorkSlipTooltip}"/>
            <tool-button text="{$Info}" id="InfoWorkSlip" icon="/icons/info.png"
                         disabled-icon="/icons/info_disabled.png" on-button-pressed="info" tooltip="{$InfoTooltip}"/>
            <tool-button text="{$Delete}" id="DeleteWorkSlip" icon="/icons/delete.png"
                         disabled-icon="/icons/delete_disabled.png" on-button-pressed="delete"
                         tooltip="{$DeleteTooltip}"/>
         </tool-bar>
         <panel x="1" layout="border" style-ref="compact-panel-default">
            <panel layout="table" flexible="false">
               <label x="0" width="2" text="{$Time}"/>
               <choice-field x="2" width="3" id="PeriodChooser" stateful="true" data-set-ref="PeriodSet"
                             on-value-changed="filterChanged" selected-index="0"/>
            </panel>
         </panel>

      </panel>

      <table-box id="WorkSlipTable" y="0" data-set-ref="WorkSlipSet" flexible="true" on-double-click="edit"
                 on-row-select="selectionChanged">
         <table-column width="180" text="{$Number}" data-column-index="0" value-type="Int"/>
         <table-column width="270" text="{$Date}" data-column-index="1" value-type="Date"/>
      </table-box>

      <status-bar y="1"/>

   </panel>

</form>
