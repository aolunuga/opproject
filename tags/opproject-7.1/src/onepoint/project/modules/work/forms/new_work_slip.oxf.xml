<form id="NewWorkSlipForm" layout="border" width="900" height="540" text="${NewWorkSlip}"
      resource-map-ref="work.new_work_slip"
      provider-class="onepoint.project.modules.work.forms.OpNewWorkSlipFormProvider"
      script="/modules/work/scripts/new_work_slip.jes"
      error-label-ref="ErrorLabel"
      default-button-ref="okButton">
   <!-- Maybe have a white background (border element w/white background) for the user data -->

   <!--Errors-->
   <data-field id="ProjectNameException" text="${ProjectNameException}"/>
   <data-field id="ActivityNameException" text="${ActivityNameException}"/>
   <data-field id="ResourceNameException" text="${ResourceNameException}"/>

   <data-field id="StartValueException" text="${StartValueException}"/>
   <data-field id="FinishValueException" text="${FinishValueException}"/>
   <data-field id="DurationValueException" text="${DurationValueException}"/>
   <data-field id="IntervalsOverlapException" text="${IntervalsOverlapException}"/>

   <data-field id="ActualEffortException" text="${ActualEffortException}"/>
   <data-field id="RemainingEffortException" text="${RemainingEffortException}"/>
   <data-field id="DuplicateEffortException" text="${DuplicateEffortException}"/>

   <data-field id="ActualCostException" text="${ActualCostException}"/>
   <data-field id="RemainingCostException" text="${RemainingCostException}"/>

   <data-set id="TimeActivitySet"/>
   <data-set id="TimeResourceSet"/>
   <data-set id="TimeProjectSet"/>
   <data-set id="EffortActivitySet"/>
   <data-set id="EffortResourceSet"/>
   <data-set id="EffortProjectSet"/>
   <data-set id="CostActivitySet"/>
   <data-set id="CostResourceSet"/>
   <data-set id="CostProjectSet"/>

   <data-set id="WorkEffortRecordSet" validator-class="onepoint.project.modules.work.validators.OpWorkEffortValidator"/>
   <data-set id="WorkTimeRecordSet" validator-class="onepoint.project.modules.work.validators.OpWorkTimeValidator"/>
   <data-set id="WorkCostRecordSet" validator-class="onepoint.project.modules.work.validators.OpWorkCostValidator"/>

   <data-set id="IndicatorIconSet">
      <data-row/>
      <data-row icon="/modules/project_planning/icons/attachment.png"/>
   </data-set>

   <data-set id="CostTypesSet"/>

   <data-set id="StartBeforeSet">
      <data-row string-value="all['${All}']"/>
      <data-row string-value="nw['${NextWeek}']"/>
      <data-row string-value="n2w['${Next2Weeks}']"/>
      <data-row string-value="nm['${NextMonth}']"/>
      <data-row string-value="n2m['${Next2Months}']"/>
   </data-set>

   <data-set id="FilterProjectSet">
      <data-row string-value="all['${All}']"/>
   </data-set>

   <data-field id="AssignmentMap"/>
   <data-field id="TimeTrackingOn"/>
   <data-field id="Pulsing"/>

   <panel layout="border">
      <panel y="-1" layout="table">
         <label y="0" x="0" width="10" id="ErrorLabel" visible="false" style-ref="label-error-default"/>
         <label x="0" y="1" width="2" text="${Date}" style-ref="label-emphasized-default"/>
         <date-field x="2" y="1" width="3" id="StartField"/>
         <label x="0" y="2" width="2" text="${Project}"/>
         <choice-field x="2" y="2" width="3" id="ProjectChooser" data-set-ref="FilterProjectSet" on-value-changed="filterChanged"  stateful="true" selected-index="0"/>
         <label x="5" y="2" width="2" text="${StartBefore}"/>
         <choice-field x="7" y="2" width="3" id="StartTimeChooser" data-set-ref="StartBeforeSet" on-value-changed="filterChanged" stateful="true" selected-index="0"/>
      </panel>

      <tab-box id="WorkSlipsTabBox" stateful="true">

         <tab id="TimeTab" text="${Time}" layout="border">
            <table-box id="TimeTable" data-set-ref="WorkTimeRecordSet" edit-mode="true" auto-grow="consecutive">
               <table-column width="100" text="${Project}" data-column-index="0" value-type="Choice" data-set-ref="TimeProjectSet"/>
               <table-column width="100" text="${Task}" data-column-index="1" value-type="Choice" data-set-ref="TimeActivitySet" on-activate="filterActivitiesTime"/>
               <table-column width="100" text="${Resource}" data-column-index="2" value-type="Choice" data-set-ref="TimeResourceSet" on-activate="filterResourcesTime"/>
               <table-column width="100" text="${Start}" data-column-index="3" value-type="Time" sortable="true"/>
               <table-column width="70" text="${Finish}" data-column-index="4" value-type="Time" sortable="true"/>
               <table-column width="80" text="${Duration}" data-column-index="5" value-type="Time" sortable="true"/>
            </table-box>
            <panel y="1" layout="flow" direction="east" visible="true">
               <button style-ref="icon-button-default" icon="/icons/plus_s.png" on-button-pressed="addTimeRow" tooltip="${AddTime}"/>
               <button style-ref="icon-button-default" icon="/icons/minus_s.png" on-button-pressed="removeTimeRows" tooltip="${RemoveTime}"/>
            </panel>
         </tab>

         <tab id="HoursTab" text="${Hours}" layout="border">
            <table-box id="EffortTable" data-set-ref="WorkEffortRecordSet" edit-mode="true" auto-grow="consecutive">
               <table-column width="100" text="${Project}" id="HoursProjectColumn" data-column-index="0" value-type="Choice" data-set-ref="EffortProjectSet"/>
               <table-column width="100" text="${Task}" id="HoursTaskColumn" data-column-index="1" value-type="Choice" data-set-ref="EffortActivitySet" on-activate="filterActivitiesEffort"/>
               <table-column width="100" text="${Resource}" id="HoursResourceColumn" data-column-index="2" value-type="Choice" data-set-ref="EffortResourceSet" on-activate="filterResourcesEffort"/>
               <table-column width="70" text="${AssignmentEffort}" id="HoursPlannedColumn" data-column-index="3" value-type="Double" sortable="true"/>
               <table-column width="70" text="${Worktime}" id="HoursEffortColumn" data-column-index="4" value-type="Duration" display-unit="Minutes" sortable="true"/>
               <table-column width="70" text="${RemainingEffort}" data-column-index="5"  value-type="Duration" display-unit="Minutes" sortable="true"/>
               <table-column width="40" text="${Completed}" data-column-index="6" value-type="Boolean" sortable="false"/>
               <table-column width="80" text="${Comment}" data-column-index="7" value-type="String"/>
            </table-box>
            <panel y="1" layout="flow" direction="east" visible="true">
               <button id="AddHoursButton" style-ref="icon-button-default" icon="/icons/plus_s.png" on-button-pressed="addHours" tooltip="${AddHours}"/>
               <button id="RemoveHoursButton" style-ref="icon-button-default" icon="/icons/minus_s.png" on-button-pressed="removeHours" tooltip="${RemoveHours}"/>
            </panel>
         </tab>

         <tab id="CostTab" text="${Costs}" layout="border">
            <table-box id="CostTable" data-set-ref="WorkCostRecordSet" edit-mode="true" auto-grow="consecutive" on-double-click="manageAttachments">
               <table-column width="35" text="" data-column-index="3" value-type="IndicatorList" icon-set-ref="IndicatorIconSet"/>
               <table-column width="100" text="${Project}" data-column-index="0" value-type="Choice" data-set-ref="CostProjectSet"/>
               <table-column width="100" text="${Task}" data-column-index="1" value-type="Choice" data-set-ref="CostActivitySet" on-activate="filterActivitiesCost"/>
               <table-column width="100" text="${Resource}" data-column-index="2" value-type="Choice" data-set-ref="CostResourceSet" on-activate="filterResourcesCost"/>
               <table-column width="100" text="${CostType}" data-column-index="4" value-type="Choice" data-set-ref="CostTypesSet" sortable="true"/>
               <table-column width="80" text="${BaseCost}" data-column-index="5" value-type="Double" sortable="true"/>
               <table-column width="70" text="${ActualCost}" data-column-index="6" value-type="Double" sortable="true"/>
               <table-column width="70" text="${RemainingCost}" data-column-index="7" value-type="Double" sortable="true"/>
               <table-column width="70" text="${Comment}" data-column-index="8" value-type="String"/>
            </table-box>
            <panel y="1" layout="flow" direction="east" visible="true">
               <button style-ref="icon-button-default" icon="/icons/plus_s.png" on-button-pressed="addCostRow" tooltip="${AddCost}"/>
               <button style-ref="icon-button-default" icon="/icons/minus_s.png" on-button-pressed="removeCostRows" tooltip="${RemoveCosts}"/>
               <button style-ref="icon-button-default" icon="/modules/project_planning/icons/document.png" on-button-pressed="manageAttachments" tooltip="${ManageAttachmentTooltip}"/>
            </panel>
         </tab>

      </tab-box>

   <panel y="1" layout="flow" direction="west">
      <panel layout="border">
         <button x="0" id="okButton" text="${OK}" on-button-pressed="ok"/>
         <button x="1" id="Cancel" text="${Cancel}" on-button-pressed="cancel"/>
      </panel>
   </panel>

   </panel>

</form>
