<form id="WorkSlipsForm" layout="border" resource-map-ref="work.work_slips"
      provider-class="onepoint.project.modules.work.forms.OpWorkSlipsFormProvider"
      script="/modules/work/scripts/work_slips.jes">
   <!-- maybe add 2nd tab showing calendar of work-slip "coverage" -->
   <data-set id="WorkSlipSet"/>

   <panel layout="border" style-ref="compact-panel-default">

      <data-set id="PeriodSet">
         <data-row string-value="current['${CurrentMonth}']"/>
         <data-row string-value="previous['${PreviousMonth}']"/>
         <data-row string-value="year['${CurrentYear}']"/>
         <data-row string-value="all['${All}']"/>
      </data-set>

      <data-set id="WorkSlipStateSet">
         <data-row string-value="editable['${Editable}']"/>
         <data-row string-value="locked['${Locked}']"/>
         <data-row string-value="approved['${Approved}']"/>
      </data-set>

      <panel layout="border" style-ref="tool-panel-default" y="-1">
         <tool-bar>
            <tool-button text="${NewWorkSlip}" id="NewWorkSlip" icon="/modules/work/icons/new_work_slip.png"
                         disabled-icon="/modules/work/icons/new_work_slip_disabled.png" on-button-pressed="newWorkSlip"
                         tooltip="${NewWorkSlipTooltip}"/>
            <tool-button text="${Info}" id="InfoWorkSlip" icon="/icons/info.png"
                         disabled-icon="/icons/info_disabled.png" on-button-pressed="edit" tooltip="${InfoTooltip}"/>
            <tool-button text="${Delete}" id="DeleteWorkSlip" icon="/icons/delete.png"
                         disabled-icon="/icons/delete_disabled.png" on-button-pressed="delete"
                         tooltip="${DeleteTooltip}"/>
            <tool-button text="${Lock}" id="LockWorkSlip" icon="/modules/work/icons/lock.png"
                         disabled-icon="/modules/work/icons/lock_disabled.png" on-button-pressed="lock"
                         tooltip="${LockTooltip}"/>
            <tool-button text="${Unlock}" id="UnlockWorkSlip" icon="/modules/work/icons/unlock.png"
                         disabled-icon="/modules/work/icons/unlock_disabled.png" on-button-pressed="unlock"
                         tooltip="${UnlockTooltip}"/>
         </tool-bar>
         <panel x="1" layout="border" style-ref="compact-panel-default">
            <panel layout="table" flexible="false">
               <label x="0" width="2" text="${Time}"/>
               <choice-field x="2" width="3" id="PeriodChooser" stateful="true" data-set-ref="PeriodSet"
                             on-value-changed="filterChanged" selected-index="0"/>
            </panel>
         </panel>

      </panel>

      <table-box id="WorkSlipTable" y="0" data-set-ref="WorkSlipSet" flexible="true" on-double-click="edit"
                 on-row-select="selectionChanged" edit-mode="true">
         <table-column width="30" text="${Number}" data-column-index="0" value-type="Int" sortable="true"/>
         <table-column width="150" text="${Date}" data-column-index="1" value-type="Date" sortable="true"/>
         <table-column width="150" text="${TotalEffort}" data-column-index="2" value-type="Double" sortable="true"/>
         <table-column width="80" text="${State}" data-column-index="3"  value-type="String" sortable="true" edit-mode="false"/>
      </table-box>

      <status-bar y="1"/>

   </panel>

</form>
